# CloudTrail
AWS CloudTrailは、AWSに関する操作ログを自動的に取得するサービスである。
AWSではマネジメントコンソールの操作や、CLIやSDKを用いたAPIによる操作によって、AWSリソースを操作したり、AWSリソースから
データを取得したりできる。サービスを運用する中で、意図的かそうでないかは問わず、リソースを誤って削除してしまったり、
データを不正に持ち出してしまったりすることがある。結果として、それが重要な障害やセキュリティインシデントに繋がる可能性があり、
「誰が」「いつ」「どのような操作をしたか」といった監査ログを記録しておくことは非常に重要である。

# CloudTrailで取得できるログの種類
CloudTrailで取得できる操作(イベント)には、管理イベントとデータイベントがある。

・管理イベント：マネジメントコンソールへのログイン、EC2インスタンスの作成、S3バケットの作成など

・データイベント：S3バケット上のデータ操作、Lambda関数の実行など
CloudTrailでは管理イベントの取得のみがデフォルトで通行になっており、過去90日分のログをマネジメントコンソール上で確認できる。
データイベントの取得はデフォルトでは有効になっていないが、設定を変更することで、管理イベントと同様にS3にログを保管することができる。
# 重要ポイント
管理イベントの取得はデフォルトで有効。データイベントの取得はデフォルトで無効。

# CloudWatch Logsとの連携
CloudTrailで監査ログを取得することで、何か問題が発生したときに各ユーザーの操作を追跡することができる。
これだけでも十分に意味があるのだが、できればユーザーが不正な操作をしたことを自動的に検知したいところである。
そのようなときに利用するのが、CloudWatch Logsとの連携機能である。
事前に不正な操作(ログメッセージ/文字列)を登録しておき、ユーザーがそれに該当する行動をしたときに検知することができる。
インシデントに繋がる操作を早期発見することができるので、非常に有用な機能だといえる。
# 重要ポイント
CloudTrailとCloudWatch Logsとの連携させることで、不正な操作を早期に発見できる。
