# RDS
RDSは、マネージドRDBサービスである。MySQL、MariaDB、PostgreSQL、Oracle、Microsoft SQL Serverなどのオンプレミスでも使い慣れたデータベースエンジンから
好きなものを選択できる。
RDSでは、複数のデータベースエンジンを利用できるが、それぞれのエンジンで提供されている機能のうち、RDSでは使用できない機能もある。

# 重要ポイント
・RDSはマネージドRDBサービスで、最大のメリットは運用の効率化。オンプレミスでも使い慣れたデータベースエンジンから好きなものを選択できる。
AWS独自のAuroraも選択可能である。

# RDSで使えるストレージタイプ
EBSの中でもRDSで利用可能なストレージタイプは、汎用SSD、プロビジョンドIOPS　SSD、マグネティックの３つである。
マグネティックは過去に作成したDBインスタンスの下位互換性維持のために利用可能となっているが、新しいDBインスタンスを作成するときには基本的にSSDを選択すること。
プロビジョンドIOPSは高いIOPSが求められる場合や、データ容量と比較してI/Oが多い場合に利用を検討する。
ストレージの容量は32TB（Microsoft SQL Serverは16TB）まで拡張が可能である。

# マルチAZ構成
マルチAZ構成とは、１つのリージョン内の２つのAZにDBインスタンスをそれぞれ配置し、障害発生時やメンテナンス時のダウンタイムを短くすることで高可用性を実現するサービスである。
DBインスタンス作成時にマルチAZ構成を選択するだけで、後はすべてAWSが自動でDBの冗長化に必要な環境を作成してくれる。
本番環境でRDSを利用するときはマルチAZ構成を推奨する。
#### 注意点
・書き込みが遅くなる：２つのAZ間でデータを同期するため、シングルAZ構成よりも書き込みやコミットにかかる時間が長くなる。本番環境でマルチAZ構成を利用する場合は、
性能テスト実施時にマルチAZ構成にした状態でテストしよう。AWSのコストを抑えるために開発環境はシングル構成にして、その環境を使って性能テストを実施したために
本番のマルチAZ構成だと想定した性能が出なかった、ということもある。

・フェイルオーバーには６０～１２０秒かかる：フェイルオーバーが発生した場合、RDSへの接続用FQDNのDNSレコードが、スタンバイ側のIPアドレスに書き換えられる。
異常を検知してDNSレコードの情報が書き換えられ、新しい接続先IPの情報が取得できるようになるまではDBに接続することはできない。
アプリケーション側でDB接続先IPのキャッシュを持っている場合は、RDSフェイルオーバー後にアプリケーションからRDSに接続できるようになるまで、１２０秒以上の時間が
かかることもある。

# リードレプリカ
リードレプリカとは、通常のRDSとは別に、参照専用のDBインスタンスを作成することができるサービスである。リードレプリカが利用可能なデータベースエンジンは
Aurora、MySQL、MariaDB、PostgreSQLの４つである。OracleやMicrosoft SQL Serverでは使えない。
リードレプリカを作成することで、マスターDBの負荷を抑えたり、読み込みが多いアプリケーションにおいてDBリソースのスケールアウトを容易に実現することが可能である。
例えば、マスターDBのメンテナンス時でも参照系サービスだけは停止したくないという場合に、アプリケーションの接続先をリードレプリカに変更した状態でマスターDBの
メンテナンスを実施する。
マスターとリードレプリカのデータ同期は、非同期レプリケーション方式である点は覚えておく必要がある。そのため、リードレプリカを参照するタイミングによっては、マスター側で
更新された情報が必ずしも反映されていない可能性がある。しかし、リードレプリカを作成しても、マルチAZ構成のスタンバイ側へのデータ同期のようにマスターDBのパフォーマンスに影響を
与えることはほとんどない。
# 重要ポイント
・マスターとリードレプリカのデータ同期は非同期レプリケーション方式なので、タイミングによっては、マスターの更新がリードレプリカに反映されていない事がある。
