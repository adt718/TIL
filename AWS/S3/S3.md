# Amazon S3
S3は非常に優れた耐久性を持つ、容量無制限のオブジェクトストレージサービスである。
ファイルストレージとの違いとしては、ディレクトリ構造を持たないフラットな構成であることや、ユーザーが独自にデータに
対して情報(メタデータ)を付与できることが挙げられる。
S3の各オブジェクトには、RESTやSOAPといったHTTPをベースとしたWeb APIを使ってアクセスする。利用者がデータを保存するために利用するだけではなく、
EBSスナップショットの保存場所として使われるなど、AWSのバックエンドサービスにも使われていて、AWSの中でも非常に重要なサービスと位置付けられている。
主なユースケースは次の通りである。
・データバックアップ

・ビックデータ解析用などのデータレイク

・ETL(Extract/Transform/Load)の中間ファイル保存

・Auto Scaling構成されたEC2インスタンスやコンテナからのログ転送先

・静的コンテンツのホスティング

・簡易的なkey-Value型のデータサービス

# 重要ポイント
S3は、非常に優れた耐久性を持つ、容量無制限のオブジェクトストレージサービスで、様々な用途に利用できる。

# S3の構成要素
S3は、次の要素から構成されている。

・バケット：オブジェクトを保存するための領域である。バケット名はバケット名はアカウントやリージョンに関係なくAWS内で一位にする必要がある。

・オブジェクト：S3に格納されているデータそのものである。各オブジェクトにはキー(オブジェクト名)が付与され、「バケット名+キー名+バージョンID」
で必ず一意になるURLが作成される。このURLをWeb APIなどで指定してオブジェクトを操作する。バケット内に格納できるオブジェクト数に制限はないが、
１つのオブジェクトサイズは５TBまでである。

# S3の耐久性と整合性
S3に保存されたデータは、複数のAZ、さらにはAZ内の複数の物理的ストレージに複製される。これによって高い高い耐久性が維持される。
データの複製方式として、S3は結果整合性方式を採用している。そのため、データの保存後、複製が完全に終わるまでの間にデータを参照すると、参照先によっては
保存前の状態が表示されることもあるので注意が必要！

# ストレージクラス
S3には高い耐久性があるが、その中にも用途に応じて５つのランク(ストレージクラス)分けがされている。なお、次の各項の耐久性と可用性は設計上の性能で、
可用性にはSLAが設定されている。

##### STANDARD
デフォルトのストレージクラスである。低レイテンシーと高スループットを兼ね備えた、S3の性能が最も発揮されるクラスである。

・耐久性：99.999999999％(イレブンナイン)

・可用性：99.9％

##### STANDARD-IA
STANDARDに比べて格納コストが安価なストレージクラスである。参照頻度が低いデータ向けに設定されたクラスであるため、データへのアクセスは随時可能だが、
データの読み出し容量に対する従量課金が行われる。高速なアクセスが必要なものの、それほど頻繁にはアクセスしない、といったデータを保存するときに最適なクラスである。

・耐久性：99.999999999％(イレブンナイン)

・可用性：99.9％

##### ONEZONE-IA
単一のAZ内のみでデータを複製するストレージクラスである。高い耐久性を発揮するが、AZ単位で障害が発生した場合にデータの復元ができない可能性がある。
それ以外はSTANDARD-IAと同様のサービス仕様である。耐久性はイレブンナインだが、１つのAZ内の耐久性のため、保存しているAZでデータ消失を伴う障害が発生した場合、
データは失われる。

・耐久性：99.999999999％(イレブンナイン)

・可用性：99.5％

##### INTELLIGENT-TIERING
参照頻度の高低を明確に決めることができないデータを扱う場合に有効なストレージクラスである。STANDARDにとSTANDARD-IAの２層構成となっており、
３０日以上参照されなかったデータは自動的にSTANDARD-IAに移動される。

・耐久性：99.999999999％(イレブンナイン)

・可用性：99.9％

##### GLACIER
ほとんど参照されないアーカイブ目的のデータを保存するストレージクラスである。オブジェクト新規作成時にこのクラスを選択することはできない。
GLACIER以外のストレージクラスを選択して、後述するライフサイクル管理機能を使ってこのストレージクラスを指定することで利用可能になる。
GLACIERクラスに保存されたデータにアクセスする場合は、事前にアクセスをリクエストする必要があり、アクセスできるようになるまでには数時間かかる。
オブジェクトはGlacierに保存されるが、引き続きS3で管理するオブジェクトであり、Glacierを介して直接アクセスすることはできない。

・耐久性：99.999999999％(イレブンナイン)

・可用性：99.9％

# ライフサイクル管理
